{"version":3,"sources":["components/AddLink.js"],"names":["AddLink","useState","short","setShort","urlRef","useRef","addLink","e","a","preventDefault","token","cookies","load","url","current","value","toast","error","fetch","method","headers","Headers","Accept","Authorization","body","JSON","stringify","then","res","json","resp","status","console","log","message","responseShort","window","location","dark","onSubmit","className","type","placeholder","onChange","ref","onClick","navigator","clipboard","writeText"],"mappings":"2LAyFeA,UAnFC,WACZ,MAA0BC,mBAAS,IAAnC,mBAAOC,EAAP,KAAcC,EAAd,KACMC,EAASC,mBAETC,EAAO,uCAAG,WAAOC,GAAP,iBAAAC,EAAA,yDACZD,EAAEE,iBAEIC,EAAQC,IAAQC,KAAK,SACrBC,EAAMT,EAAOU,QAAQC,MAJf,uBAORC,IAAMC,MAAM,oBAPJ,0BAWZC,MAAM,YAAa,CACfC,OAAQ,OACRC,QAAS,IAAIC,QAAQ,CACjB,eAAgB,mBAChBC,OAAQ,mBACRC,cAAeb,IAEnBc,KAAMC,KAAKC,UAAU,CACjBb,IAAKA,MAEVc,KAVH,uCAUQ,WAAOC,GAAP,iBAAApB,EAAA,sEACeoB,EAAIC,OADnB,OACEC,EADF,OAGe,MAAfF,EAAIG,QACJC,QAAQC,IAAIH,GACZd,IAAMC,MAAMa,EAAKI,WAEXC,EADH,UACsBC,OAAOC,UAD7B,OACwCP,EAAK5B,OAChDC,EAASgC,GACT/B,EAAOU,QAAQC,MAAQoB,EACvBnB,IAAMsB,KACF,4DAXJ,2CAVR,uDAyBAN,QAAQC,IAAI,QApCA,2CAAH,sDA8Cb,OACI,uBACIM,SAAU,SAAChC,GAAD,OACLL,EAAqBK,EAAEE,iBAAfH,EAAQC,IAErBiC,UAAU,yBAJd,UAMI,uBACIC,KAAK,MACLD,UAAU,YACVE,YAAY,6BACZC,SAAU,kBAAMxC,EAAS,KACzByC,IAAKxC,IAERF,EACG,wBACI2C,QAvBQ,WACpBC,UAAUC,UAAUC,UAAU9C,GAC9Bc,IAAMsB,KACF,2CAqBQE,UAAU,+CAFd,kBAOA,wBACIC,KAAK,SACLD,UAAU,+CAFd,0B","file":"js/4.e9a35258.chunk.js","sourcesContent":["import { useState, useRef } from 'react';\r\nimport cookies from 'react-cookies';\r\nimport { toast } from 'react-toastify';\r\n\r\nimport '../styles/AddLink.css';\r\n\r\nconst AddLink = () => {\r\n    const [short, setShort] = useState('');\r\n    const urlRef = useRef();\r\n\r\n    const addLink = async (e) => {\r\n        e.preventDefault();\r\n\r\n        const token = cookies.load('Token');\r\n        const url = urlRef.current.value;\r\n\r\n        if (!url) {\r\n            toast.error('URL not provided');\r\n            return;\r\n        }\r\n\r\n        fetch('/api/urls', {\r\n            method: 'POST',\r\n            headers: new Headers({\r\n                'Content-Type': 'application/json',\r\n                Accept: 'application/json',\r\n                Authorization: token,\r\n            }),\r\n            body: JSON.stringify({\r\n                url: url,\r\n            }),\r\n        }).then(async (res) => {\r\n            const resp = await res.json();\r\n\r\n            if (res.status !== 201) {\r\n                console.log(resp);\r\n                toast.error(resp.message);\r\n            } else {\r\n                const responseShort = `${window.location}${resp.short}`;\r\n                setShort(responseShort);\r\n                urlRef.current.value = responseShort;\r\n                toast.dark(\r\n                    'Link shortened! Press COPY to copy it to your clipboard'\r\n                );\r\n            }\r\n        });\r\n        console.log('DONE');\r\n    };\r\n\r\n    const copyToClipboard = () => {\r\n        navigator.clipboard.writeText(short);\r\n        toast.dark(\r\n            'Shortened URL copied to your clipboard'\r\n        );\r\n    };\r\n\r\n    return (\r\n        <form\r\n            onSubmit={(e) =>\r\n                !short ? addLink(e) : e.preventDefault()\r\n            }\r\n            className='add-link d-flex-column'\r\n        >\r\n            <input\r\n                type='url'\r\n                className='input-box'\r\n                placeholder='Enter full link to shorten'\r\n                onChange={() => setShort('')}\r\n                ref={urlRef}\r\n            />\r\n            {short ? (\r\n                <button\r\n                    onClick={copyToClipboard}\r\n                    className='subheading-text submit-button uppercase-text'\r\n                >\r\n                    COPY\r\n                </button>\r\n            ) : (\r\n                <button\r\n                    type='submit'\r\n                    className='subheading-text submit-button uppercase-text'\r\n                >\r\n                    Shorten\r\n                </button>\r\n            )}\r\n        </form>\r\n    );\r\n};\r\n\r\nexport default AddLink;\r\n"],"sourceRoot":""}